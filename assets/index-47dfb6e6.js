var p=Object.defineProperty;var y=(r,t,e)=>t in r?p(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var l=(r,t,e)=>(y(r,typeof t!="symbol"?t+"":t,e),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function e(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=e(i);fetch(i.href,s)}})();class c{constructor(t,e){l(this,"x");l(this,"y");this.x=t,this.y=e}multiply(t){return new c(this.x*t,this.y*t)}sum(t){return new c(this.x+t.x,this.y+t.y)}differanceTo(t){return new c(this.x-t.x,this.y-t.y)}getOffsetPointTo(t){return new c(this.x+t.x,this.y+t.y)}definePointOnSegment(t,e=.5){const n=this.x+(t.x-this.x)*e,i=this.y+(t.y-this.y)*e;return new c(n,i)}distanceTo(t){const e=Math.abs(this.x-t.x),n=Math.abs(this.y-t.y);return Math.sqrt(e**2+n**2)}paint(t,e="blue"){t.beginPath(),t.rect(this.x-1,this.y-1,3,3),t.strokeStyle=e,t.stroke()}}class P{constructor(t){l(this,"points");l(this,"curvePointNumber",1e3);this.points=t.slice()}defineBezierCurve(){const t=[];for(let e=0;e<this.curvePointNumber;e++){const n=e/this.curvePointNumber,i=this.defineBezierPoint(n);t.push(i)}return t}defineBezierPoint(t){const e=this.points.length-1;return this.points.reduce((n,i,s)=>{const o=i.multiply(this.bernsteinBasisPolynomial(s,e,t));return n.sum(o)},new c(0,0))}bernsteinBasisPolynomial(t,e,n){return this.binomialCoefficient(t,e)*n**t*(1-n)**(e-t)}binomialCoefficient(t,e){const n=this.factorial(e),i=this.factorial(t)*this.factorial(e-t);return n/i}factorial(t){return t==0?1:t*this.factorial(t-1)}paint(t){t.beginPath(),this.defineBezierCurve().forEach(n=>{t.rect(n.x,n.y,1,1)}),t.strokeStyle="red",t.stroke()}}class m{constructor(t){l(this,"points");this.points=t}defineMiddlePoints(){const t=[];for(let e=0;e<this.points.length-1;e++){const n=this.points[e].definePointOnSegment(this.points[e+1]);t.push(n)}return t}defineProportionalPoints(t){const e=[];for(let n=0;n<this.points.length-2;n++){const i=this.points[n].distanceTo(this.points[n+1]),s=this.points[n+1].distanceTo(this.points[n+2]),o=i/(i+s),a=t[n].definePointOnSegment(t[n+1],o);e.push(a)}return e}defineAuxillaryPoints(t,e){const n=[];n.push(this.points[0]);for(let i=0;i<e.length;i++){const s=this.points[i+1].differanceTo(e[i]),o=t[i].getOffsetPointTo(s),a=t[i+1].getOffsetPointTo(s);n.push(o,a)}return n.push(this.points[this.points.length-1]),n}paint(t){const e=this.defineMiddlePoints(),n=this.defineProportionalPoints(e),i=this.defineAuxillaryPoints(e,n),s=[];for(let o=0;o<this.points.length-1;o++){const a=new P([this.points[o],i[2*o],i[2*o+1],this.points[o+1]]);s.push(a)}s.forEach(o=>o.paint(t))}}const h=document.getElementById("canvas"),g=document.getElementById("clear-btn"),u=h.getContext("2d");let f=[];const d=r=>r.clearRect(0,0,h.width,h.height),x=r=>{const t=h.getBoundingClientRect();return new c(r.clientX-t.left,r.clientY-t.top)};u&&(g.addEventListener("click",()=>{f=[],d(u)}),h.addEventListener("mousedown",function(r){const t=x(r);f.push(t),d(u),f.forEach(n=>n.paint(u)),new m(f).paint(u)}));
